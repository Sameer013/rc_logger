<!DOCTYPE html>
<html class="loading semi-dark-layout" lang="en" data-layout="semi-dark-layout" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,minimal-ui">
    <meta name="description"
        content="Vuexy admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords"
        content="admin template, Vuexy admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>Apex Charts - Vuexy - Bootstrap HTML admin template</title>
    <link rel="apple-touch-icon" href="/app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="/app-assets/images/ico/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;1,400;1,500;1,600"
        rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/vendors.min.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/charts/apexcharts.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/pickers/flatpickr/flatpickr.min.css">
    <!-- END: Vendor CSS-->


    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="/app-assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css/bootstrap-extended.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css/components.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css/themes/dark-layout.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css/themes/bordered-layout.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css/themes/semi-dark-layout.css">

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="/app-assets/css/core/menu/menu-types/vertical-menu.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css/plugins/forms/pickers/form-flat-pickr.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css/plugins/charts/chart-apex.css">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="/assets/css/style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.0/css/font-awesome.css"
        integrity="sha512-72McA95q/YhjwmWFMGe8RI3aZIMCTJWPBbV8iQY3jy1z9+bi6+jHnERuNrDPo/WGYEzzNs4WdHNyyEr/yXJ9pA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <!-- END: Custom CSS-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body>

    <style>
        .chart-container {
            width: 45%;
            float: left;
            margin: 10px;
        }

        .card {
            border-radius: 10px;
            text-align: center;

        }

        body {
            text-align: center;
            background-color: #e6e6ff;
        }
    </style>

    </head>
    <!-- END: Head-->

    <!-- BEGIN: Body-->

    <body class="vertical-layout vertical-menu-modern  navbar-floating footer-static  " data-open="click"
        data-menu="vertical-menu-modern" data-col="">

        <!-- BEGIN: Header-->
        <nav
            class="header-navbar navbar navbar-expand-lg align-items-center floating-nav navbar-light navbar-shadow container-xxl">
            <div class="navbar-container d-flex content">
                <div class="bookmark-wrapper d-flex align-items-center">
                    <ul class="nav navbar-nav d-xl-none">
                        <li class="nav-item"><a class="nav-link menu-toggle" href="#"><i class="ficon"
                                    data-feather="menu"></i></a></li>
                    </ul>
                    <ul class="nav navbar-nav bookmark-icons">
                        <li class="nav-item d-none d-lg-block"></li>
                    </ul>
                </div>
                <ul class="nav navbar-nav align-items-center ms-auto">
                    <li class="nav-item dropdown dropdown-language"><a class="nav-link dropdown-toggle"
                            id="dropdown-flag" href="#" data-bs-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <h1 class="content-header-title float-start mb-0">RC Logger
                            </h1>
                        </a>
                    </li>

                    <li class="nav-item d-none d-lg-block"><a class="nav-link nav-link-style"><i class="ficon"
                                data-feather="moon"></i></a></li>
                    <li class="nav-item dropdown dropdown-notification me-25">
                        <i class="ficon" data-feather="credit-card" data-bs-toggle="modal"
                            data-bs-target="#shareProject"></i>
                    </li>
                </ul>
            </div>
        </nav>

        <ul class="main-search-list-defaultlist-other-list d-none">
            <li class="auto-suggestion justify-content-between"><a
                    class="d-flex align-items-center justify-content-between w-100 py-50">
                    <div class="d-flex justify-content-start"><span class="me-75"
                            data-feather="alert-circle"></span><span>No results found.</span></div>
                </a></li>
        </ul>
        <!-- END: Header-->
        <!-- BEGIN: Main Menu-->
        <div class="main-menu menu-fixed menu-dark menu-accordion menu-shadow" data-scroll-to-active="true">
            <div class="navbar-header">
                <ul class="nav navbar-nav flex-row">
                    <img src="/assets/images/tata_logo.png" height="80px" width="195px">
                    </li>
                    <li class="nav-item nav-toggle"><a class="nav-link modern-nav-toggle pe-0"
                            data-bs-toggle="collapse"><i
                                class="d-block d-xl-none text-primary toggle-icon font-medium-4" data-feather="x"></i><i
                                class="d-none d-xl-block collapse-toggle-icon font-medium-4  text-primary"
                                data-feather="disc" data-ticon="disc"></i></a></li>
                </ul>
            </div>
            <div class="shadow-bottom"></div>
            <div class="main-menu-content">
                <ul class="navigation navigation-main" id="main-menu-navigation" data-menu="menu-navigation">
                    <li class="active nav-item"><a class="d-flex align-items-center" href="chart-apex.html"><i
                                data-feather="home"></i><span class="menu-title text-truncate"
                                data-i18n="Dashboards">Dashboards</span></a>
                    </li>
                    <li class=" nav-item"><a class="d-flex align-items-center" href="card-basic.html"><i
                                data-feather="user"></i><span class="menu-title text-truncate"
                                data-i18n="Todo">User</span></a>
                    </li>

                    <li class=" nav-item">
                        <!-- <img src="blockdiagram.jpg" height="450px" width="270px"> -->
                        <!-- <img src="blockdiagram9-removebg-preview.png" height="500px" width="270px"> -->
                    </li>
                </ul>
            </div>
        </div>
        <!-- END: Main Menu-->

        <!-- BEGIN: Content-->
        <div class="app-content content ">
            <div class="modal fade" id="shareProject" tabindex="-1" aria-labelledby="shareProjectTitle"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content">
                        <div class="modal-header bg-transparent">
                            <div class="col-xl-12 col-lg-12">
                                <div class="card">
                                    <div class="card-body">
                                        <ul class="nav nav-tabs" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link active" id="homeIcon-tab" data-bs-toggle="tab"
                                                    href="#homeIcon" aria-controls="home" role="tab"
                                                    aria-selected="true"><i data-feather="home"></i>
                                                    Home</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="aboutIcon-tab" data-bs-toggle="tab"
                                                    href="#aboutIcon" aria-controls="about" role="tab"
                                                    aria-selected="false"><i data-feather="user"></i>
                                                    Account</a>
                                            </li>
                                        </ul>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            



            <div class="content-wrapper container-xxl p-0">

                <div class="content-body">
                    <!-- apex charts section start -->
                    <section id="apexchart">
                        <div class="row">

                            <div class="container-fluid">
                                <div class="row">

                                    <div class="col-12 col-md-12 col-lg-12 col-xl-12 ">

                                        <div class="card">
                                            <div class="card-header d-flex flex-sm-row flex-column justify-content-md-between align-items-start justify-content-start">

                                                <div class="chart-container">
                                                    <div class="indicator" id="indicatorS1"></div>
                                                    <canvas id="chartContainerS1"
                                                        style="height: 200px; width: 100%;"></canvas>
                                                </div>

                                                <div class="chart-container">
                                                    <div class="indicator" id="indicatorS2"></div>
                                                    <canvas id="chartContainerS2"
                                                        style="height: 200px; width: 100%;"></canvas>
                                                </div>

                                                <div class="chart-container">
                                                    <div class="indicator" id="indicatorS3"></div>
                                                    <canvas id="chartContainerS3"
                                                        style="height: 200px; width: 100%;"></canvas>
                                                </div>

                                                <div class="chart-container">
                                                    <div class="indicator" id="indicatorS4"></div>
                                                    <canvas id="chartContainerS4"
                                                        style="height: 200px; width: 100%;"></canvas>
                                                </div>

                                            </div>

                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
        <footer class="footer footer-static footer-light">

            <p class="clearfix mb-0 "><span class="float-md-center d-block d-md-inline-block mt-25">Designed and
                    Developed By
                    <a class="ms-25" href="https://www.sigmaworld.in/" target="_blank">Sigma E Solution
                        Pvt Ltd </a><span></p>

        </footer>
        <!-- END: Content-->


        <!-- BEGIN: Vendor JS-->
        <script src="/app-assets/vendors/js/vendors.min.js"></script>
        <!-- BEGIN Vendor JS-->

        <!-- BEGIN: Page Vendor JS-->
        <script src="/app-assets/vendors/js/charts/apexcharts.min.js"></script>
        <script src="/app-assets/vendors/js/pickers/flatpickr/flatpickr.min.js"></script>
        <!-- END: Page Vendor JS-->

        <!-- BEGIN: Theme JS-->
        <script src="/app-assets/js/core/app-menu.js"></script>
        <script src="/app-assets/js/core/app.js"></script>
        <!-- END: Theme JS-->

        <!-- BEGIN: Page JS-->
        <script src="/app-assets/js/scripts/charts/chart-apex.js"></script>
        <!-- END: Page JS-->
        <script src="/assets/js/jquery.js"></script>
        <script src="/assets/js/chartjs/dist/chart.umd.js"></script>
        <script
        src="/assets/js/chartjs-adapter-date-fns.bundle.min.js"></script>

        <script>
            
            $(document).ready(function () {
                var charts = [];

                for (var i = 1; i <= 5; i++) {
                    var chartContainerId = "chartContainerS" + i;
                    var ctx = document.getElementById(chartContainerId).getContext('2d');
                    var dps = [];
                    var maxDps = [];
                    var Indicator = " ";
                    var labelValue = (i === 1) ? 'INCOMER' : 'RC' + (parseInt(i)-1);
                    var chart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            datasets: [
                                {
                                    label: labelValue,
                                    borderColor: getRandomColor(),
                                    data: dps,
                                    fill: false,
                                },
                                {
                                    label: 'Max Values',
                                    borderColor: 'red',
                                    borderDash: [5, 5],
                                    borderWidth: 1,  
                                    pointRadius: 0, 
                                    data: maxDps,
                                    fill: false,
                                },
                            ],
                        },
                        options: {
                            tension: 0.4,
                            cubicInterpolationMode: 'monotone',
                            animation: {
                                duration: updateInterval / 2,
                            },
                            scales: {
                                x: {
                                    type: 'time',
                                    time: {
                                        unit: 'second',
                                        displayFormats: {
                                            second: 'HH:mm:ss',
                                        },
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Time',
                                    },
                                },
                                y: {
                                    beginAtZero: true,
                                },
                            },
                        },
                    });

                    charts.push({ chart: chart, dps: dps, maxDps: maxDps });
                }

                var updateInterval = 1000;

                var updateCharts = function () {
                    $.ajax({
                        url: 'fetch_data.php',
                        method: 'GET',
                        contentType: 'application/json',
                        success: function (data) {
                            var xVal = new Date().toISOString();
                            for (var i = 0; i < charts.length; i++) {
                                var yVal = data.values[i];
                                var maxVal = data.minMaxValues.max;
                                var dps = charts[i].dps;
                                var maxDps = charts[i].maxDps;

                                dps.push({
                                    x: xVal,
                                    y: yVal,
                                });

                                maxDps.push({
                                    x: xVal,
                                    y: maxVal,
                                });

                                
                                var binaryIndicator = yVal > 3000 ? 1 : 0;
                                var indicatorElement = document.getElementById('indicatorS' + (i + 1));
                                var indicatorElement = document.getElementById('indicatorS' + (i + 1));
                                indicatorElement.innerHTML = binaryIndicator === 1 ?
                                    '<img src="red_dot.jpg" alt="Red Dot" style="width: 20px; height: 20px;">' :
                                    '<img src="green_dot.png" alt="Green Dot" style="width: 20px; height: 20px;">';

                                charts[i].chart.update();

                                if (dps.length > 20) {
                                    dps.shift();
                                }

                                if (maxDps.length > 20) {
                                    maxDps.shift();
                                }
                            }
                        },
                    });
                };


                updateCharts();

                setInterval(updateCharts, updateInterval);

                function getRandomColor() {
                    var letters = '0123456789ABCDEF';
                    var color = '#';
                    for (var i = 0; i < 6; i++) {
                        color += letters[Math.floor(Math.random() * 16)];
                    }
                    return color;
                }
            });
        </script>

        <script>
            $(document).ready(function () {
                if (feather) {
                    feather.replace({
                        width: 14,
                        height: 14
                    });
                }
            });

        </script>

        <script>
            $(document).ready(function () {

                $('#datatable').DataTable({
                    "paging": false,
                    "searching": false,
                    "ajax": {
                        "url": "#",
                        "method": "GET",
                        "dataSrc": "data"
                    },
                    "columns": [
                        { "data": "serialNumber" },
                        { "data": "value" },
                        { "data": "status" },
                        { "data": "remark" },
                    ]
                });

                function initDataTable() {
                    $('#readings').DataTable({
                        "ajax": {
                            "url": "#",
                            "dataSrc": ""
                        },
                        "columns": [
                            { "data": "s1" },
                           
                            { "data": "timestamp" }
                        ],
                        "order": [[4, 'desc']]
                    });
                }

                initDataTable();
                function updateDataTable() {
                    $('#readings').DataTable().ajax.reload(null, false);
                }

                setInterval(function () {
                    updateDataTable();
                }, 1000);

            });
        </script>
        <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

    </body>

    <!-- END: Body-->

</html>